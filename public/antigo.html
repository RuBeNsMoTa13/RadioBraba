<!DOCTYPE html>
<html lang="pt-BR">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Radio Braba - Visualiza√ß√£o Antiga</title>
	<style>
		/* NOVO: Estiliza√ß√£o mais pr√≥xima da ViewPage */
		body {
			background: #1F2937;
			color: #fff;
			overflow-y: hidden;
			overflow-x: hidden;
			font-family: Arial, sans-serif;
		}

		.container {
			display: grid;
			grid-template-columns: 1fr 2fr;
			height: 100vh;
			width: 100vw;
		}

		.left {
			background: #EE2B62;
			color: #18181b;
			display: flex;
			flex-direction: column;
			justify-content: space-between;
			align-items: center;
			padding: 32px 16px;
			min-width: 320px;
		}

		.weather {
			background: rgba(255, 255, 255, 0.7);
			color: #18181b;
			border-radius: 16px;
			padding: 16px 32px;
			margin-bottom: 32px;
			font-size: 1.8em;
			font-weight: 500;
			width: 300px;
			text-align: center;
			box-shadow: 0 2px 8px #0002;
		}

		.qr {
			margin-top: 32px;
			width: 100%;
			text-align: center;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.qr img {
			height: 300px;
			width: 550px;
			border-radius: 16px;
		}

		.right {
			background: #1F2937;
			display: flex;
			flex-direction: column;
			height: 100%;
		}

		.supporters {
			flex: 1;
			background: #1F2937;
			margin: 0;
			padding: 0;
			overflow: hidden;
			text-align: center;
			display: flex;
			flex-direction: column;
			align-items: stretch;
			justify-content: stretch;
			height: 50%;
			min-height: 0;
		}

		.supporters h2 {
			color: #fff;
			font-size: 2.2em;
			margin: 0;
			padding: 24px 0 0 0;
			font-weight: bold;
			letter-spacing: 1px;
		}

		.carousel {
			flex: 1;
			display: flex;
			justify-content: center;
			align-items: center;
			gap: 128px;
			flex-wrap: wrap;
			width: 100%;
			height: 100%;
			padding: 32px 0 32px 0;
		}

		.carousel img {
			width: 300px;
			min-width: 300px;
			height: 300px;
			object-fit: contain;
			border-radius: 12px;
			padding: 4px;
			background: transparent;
		}

		.curiosities {
			flex: 1;
			color: #fff;
			font-size: 1.1em;
			background: #1F2937;
			border-radius: 16px;
			margin-top: 0;
			display: flex;
			align-items: center;
			justify-content: center;
			height: 50%;
			max-height: 491px;
			padding: 0;
			overflow: hidden;
		}

		#curiosity-text {
			width: 100%;
			height: 100%;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		@media (max-width: 900px) {
			.container {
				grid-template-columns: 1fr;
			}

			.left,
			.right {
				width: 100%;
				min-width: unset;
			}

			.supporters,
			.curiosities {
				height: 50vh;
			}
		}

		.player-card {
			position: relative;
			overflow: hidden;
			background-color: #ffffff;
			color: #000000;
			padding: 2rem 1.5rem;
			border-radius: 1.5rem;
			box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
			border: none;
			display: flex;
			flex-direction: column;
			align-items: center;
			width: 100%;
			max-width: 24rem;
		}

		/* Camada de Fundo Blur */
		.background-blur {
			position: absolute;
			top: 0;
			right: 0;
			bottom: 0;
			left: 0;
			background-size: cover;
			background-position: center;
			filter: blur(1rem);
			transform: scale(1.1);
		}

		/* Camada de Overlay */
		.overlay {
			position: absolute;
			top: 0;
			right: 0;
			bottom: 0;
			left: 0;
			background-color: #000000;
			opacity: 0.5;
		}

		/* Conte√∫do Principal do Player */
		.player-content {
			position: relative;
			z-index: 10;
			display: flex;
			flex-direction: column;
			align-items: center;
			width: 100%;
		}

		.song-cover {
			border-radius: 0.5rem;
			object-fit: cover;
			margin-bottom: 0.75rem;
			width: 12rem;
			height: 12rem;
		}

		/* Carrossel de Texto */
		.song-title-carousel {
			color: #ec4899;
			font-size: 1.5rem;
			font-weight: 500;
			margin-bottom: 0.5rem;
			width: 100%;
			overflow: hidden;
		}

		.song-title {
			white-space: nowrap;
			animation: marquee 15s linear infinite;
		}

		@keyframes marquee {
			0% {
				transform: translateX(100%);
			}

			100% {
				transform: translateX(-100%);
			}
		}

		/* Controles do Player */
		.player-controls {
			display: flex;
			flex-direction: column;
			align-items: center;
			width: 100%;
			justify-content: center;
			margin-top: 0.5rem;
			gap: 0.75rem;
		}

		.play-button {
			height: 3rem;
			width: 3rem;
			font-size: large;
			font-weight: 900;
			border-radius: 9999px;
			background-color: #ffffff;
			border: 2px solid #ccc;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);
			color: #000000;
			transition-property: color, background-color;
			transition-duration: 150ms;
		}

		.play-button:hover {
			background-color: #f3f4f6;
			color: #ec4899;
		}

		.volume-container {
			display: flex;
			align-items: center;
			gap: 0.5rem;
			margin-top: 0.5rem;
		}

		.mute-button {
			height: 3rem;
			width: 3rem;
			border-radius: 9999px;
			color: #ffffff;
			background-color: transparent;
			border: none;
			transition-property: color, background-color;
			transition-duration: 150ms;
		}

		.mute-button:hover {
			color: #ec4899;
			background-color: rgba(243, 244, 246, 0.3);
		}

		.volume-slider-container {
			width: 10rem;
			background-color: #f3f4f6;
			border-radius: 9999px;
			padding: 0.25rem;
			box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.06);
		}

		.volume-slider {
			width: 100%;
			height: 0.5rem;
			background: linear-gradient(to right, #ec4899, #db2777);
			border-radius: 9999px;
			cursor: pointer;
			box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
		}

		.volume-slider::-webkit-slider-thumb {
			-webkit-appearance: none;
			width: 1rem;
			height: 1rem;
			background: #ffffff;
			border: 2px solid #ec4899;
			border-radius: 9999px;
			cursor: pointer;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);
		}
	</style>
</head>

<body>
	<div class="container">
		<div class="left">
			<div class="weather" id="weather">
				<span id="temp">--¬∞C</span> | <span id="clock">--:--:--</span>
			</div>
			<div class="player-card">
				<div class="background-blur" style="background-image: url('../public/images/RadioBraba.png');"></div>

				<div class="overlay"></div>

				<div class="player-content">
					<img src="/images/RadioBraba.png" alt="Logo R√°dio Braba" class="song-cover">

					<div class="song-title-carousel">
						<p class="song-title animate-marquee">‚ô™ Tocando agora: Ao vivo</p>
					</div>

					<div class="player-controls">
						<audio id="radio" style="display: none;">
							<source src="https://stm16.xcast.com.br:9186/stream" type="audio/mpeg">
							Seu navegador n√£o suporta o player de r√°dio.
						</audio>
						<button id="play-button" class="play-button">
							‚ñ∂
						</button>
						<div class="volume-container">
							<div class="volume-container">
								<button id="mute-button" class="mute-button">
									<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
										fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
										stroke-linejoin="round" class="feather feather-volume-2">
										<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
										<path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>
									</svg>
									<span class="sr-only">Mutar</span>
								</button>
								<div class="volume-slider-container">
									<input type="range" class="volume-slider" min="0" max="1" step="0.01" value="0.5">
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="qr">
				<img id="qrCode" src="images/Apoiadores/QRcodeFollow.png" alt="QR Code">
			</div>
		</div>
		<div class="right">
			<div class="supporters">
				<h2>Apoio cultural!</h2>
				<div class="carousel" id="supporters-carousel">
					<!-- Carrossel de apoiadores ser√° preenchido via JS -->
				</div>
			</div>
			<div class="curiosities" id="curiosity">
				<span id="curiosity-text"><b>Curiosidade:</b> A R√°dio Braba foi fundada para valorizar o com√©rcio local
					e trazer informa√ß√£o de qualidade para Capela do Alto!</span>
			</div>
		</div>
	</div>
	<script>
		// Atualiza o rel√≥gio
		function updateClock() {
			var now = new Date();
			var h = now.getHours().toString().padStart(2, '0');
			var m = now.getMinutes().toString().padStart(2, '0');
			var s = now.getSeconds().toString().padStart(2, '0');
			document.getElementById('clock').textContent = 'üïõ ' + h + ':' + m + ':' + s;
		}
		setInterval(updateClock, 1000);
		updateClock();

		// Alterna QR Code
		var qrImages = [
			'images/Apoiadores/QRcodeFollow.png',
			'images/Apoiadores/QRcodeListen.png'
		];
		var qrIndex = 0;
		setInterval(function () {
			qrIndex = (qrIndex + 1) % qrImages.length;
			document.getElementById('qrCode').src = qrImages[qrIndex];
		}, 5000);

		// Carrossel de apoiadores
		var supporterImgs = [
			'images/Apoiadores/1.svg', 'images/Apoiadores/2.svg', 'images/Apoiadores/3.svg',
			'images/Apoiadores/4.svg', 'images/Apoiadores/5.svg', 'images/Apoiadores/6.svg',
			'images/Apoiadores/7.svg', 'images/Apoiadores/8.svg', 'images/Apoiadores/9.svg',
			'images/Apoiadores/10.svg', 'images/Apoiadores/11.svg', 'images/Apoiadores/12.svg',
			'images/Apoiadores/13.svg', 'images/Apoiadores/14.svg', 'images/Apoiadores/15.svg',
			'images/Apoiadores/16.svg', 'images/Apoiadores/17.svg', 'images/Apoiadores/18.svg'
		];
		var supporterIndex = 0;
		var supporterVisible = 3; // Agora mostra 3 por vez
		function updateSupportersCarousel() {
			var carousel = document.getElementById('supporters-carousel');
			carousel.innerHTML = '';
			for (var i = 0; i < supporterVisible; i++) {
				var idx = (supporterIndex + i) % supporterImgs.length;
				var img = document.createElement('img');
				img.src = supporterImgs[idx];
				img.alt = 'Apoiador ' + (idx + 1);
				carousel.appendChild(img);
			}
		}
		setInterval(function () {
			supporterIndex = (supporterIndex + 1) % supporterImgs.length;
			updateSupportersCarousel();
		}, 5000);
		updateSupportersCarousel();

		// Carrossel de curiosidades visual
		var curiosities = [
			'images/Curiosidades/1.svg',
			'images/Curiosidades/2.svg',
			'images/Curiosidades/3.svg',
			'images/Curiosidades/4.svg',
			'images/Curiosidades/5.svg',
			'images/Curiosidades/6.svg',
			'images/Curiosidades/7.svg',
			'images/Curiosidades/8.svg',
			'images/Curiosidades/9.svg',
			'images/Curiosidades/10.svg',
			'images/Curiosidades/11.svg',
			'images/Curiosidades/12.svg',
			'images/Curiosidades/13.svg',
			'images/Curiosidades/14.svg',
			'images/Curiosidades/15.svg',
			'images/Curiosidades/16.svg',
			'images/Curiosidades/17.svg',
			'images/Curiosidades/18.svg',
			'images/Curiosidades/19.svg',
			'images/Curiosidades/20.svg',
			'images/Curiosidades/21.svg',
			'images/Curiosidades/22.svg',
			'images/Curiosidades/23.svg',
			'images/Curiosidades/24.svg',
			'images/Curiosidades/25.svg'
		];
		var curiosityIndex = 0;
		function updateCuriosity() {
			var el = document.getElementById('curiosity-text');
			el.innerHTML = '<img src="' + curiosities[curiosityIndex] + '" alt="Curiosidade" style="width:100%;height:100%;object-fit:cover;border-radius:10px;">';
		}
		setInterval(function () {
			curiosityIndex = (curiosityIndex + 1) % curiosities.length;
			updateCuriosity();
		}, 15000);
		updateCuriosity();

		// Busca temperatura via OpenWeather (XHR para compatibilidade)
		function fetchWeather() {
			var apiKey = '321e647d854e73a9b6edd3e50bf77801';
			var url = 'https://api.openweathermap.org/data/2.5/weather?q=capela+do+alto&appid=' + apiKey + '&lang=pt_br&units=metric';
			var xhr = new XMLHttpRequest();
			xhr.onreadystatechange = function () {
				if (xhr.readyState === 4 && xhr.status === 200) {
					try {
						var data = JSON.parse(xhr.responseText);
						var temp = Math.round(data.main.temp);
						document.getElementById('temp').textContent = '‚òÅÔ∏è ' + temp + '¬∞C';
					} catch (e) {
						document.getElementById('temp').textContent = '--¬∞C';
					}
				}
			};
			xhr.open('GET', url, true);
			xhr.send();
		}
		fetchWeather();

		// Adicione este c√≥digo ao final do seu bloco de script existente

		// Conecta o bot√£o de play com o elemento de √°udio
		const audio = document.getElementById('radio');
		const playButton = document.getElementById('play-button');
		let isPlaying = false;

		playButton.addEventListener('click', () => {
			if (isPlaying) {
				audio.pause();
				playButton.textContent = '‚ñ∂';
			} else {
				audio.play();
				playButton.textContent = '‚è∏';
			}
			isPlaying = !isPlaying;
		});

		// Adicione este c√≥digo ao final do seu bloco de script existente

const muteButton = document.getElementById('mute-button');
const volumeIcon = muteButton.querySelector('svg');
let isMuted = false;
let lastVolume = 0.5; // Guarda o volume anterior antes de mutar

muteButton.addEventListener('click', () => {
    if (isMuted) {
        // Desmutar: retorna o volume ao valor anterior
        audio.muted = false;
        audio.volume = lastVolume;
        volumeIcon.innerHTML = `<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                                <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>`;
    } else {
        // Mutar: salva o volume atual e o define como 0
        lastVolume = audio.volume;
        audio.muted = true;
        volumeIcon.innerHTML = `<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                                <line x1="23" y1="9" x2="17" y2="15"></line>
                                <line x1="17" y1="9" x2="23" y2="15"></line>`;
    }
    isMuted = !isMuted;
});

// Para fazer o slider de volume funcionar junto
const volumeSlider = document.querySelector('.volume-slider');

volumeSlider.addEventListener('input', () => {
    audio.volume = volumeSlider.value;
    // Se o usu√°rio move o slider, desmuta automaticamente
    if (audio.muted && volumeSlider.value > 0) {
        audio.muted = false;
        isMuted = false;
        volumeIcon.innerHTML = `<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                                <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>`;
    }
});
	</script>
</body>

</html>